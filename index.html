<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Webhook Spammer</title>
  <style>
    /* å…¨ä½“ */
body {
  background-color: #121212;
  color: #00ff99;
  font-family: "Courier New", monospace;
  padding: 10px;
  margin: 0;
  font-size: 16px;
}

/* ãƒ•ã‚©ãƒ¼ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ */
fieldset {
  border: 1px solid #00ff99;
  margin-bottom: 15px;
  padding: 12px;
  border-radius: 8px;
}

legend {
  color: #00ff99;
  font-weight: bold;
  font-size: 18px;
}

/* å…¥åŠ›æ¬„ */
input, textarea, select {
  background: #1a1a1a;
  color: #00ff99;
  border: 1px solid #00ff99;
  padding: 12px;
  width: 100%;
  margin-bottom: 12px;
  font-size: 16px;
  border-radius: 6px;
  box-sizing: border-box;
}

/* ãƒœã‚¿ãƒ³ */
button {
  background: #1a1a1a;
  color: #00ff99;
  border: 1px solid #00ff99;
  padding: 14px;
  width: 100%;
  margin-bottom: 12px;
  cursor: pointer;
  font-size: 18px;
  border-radius: 6px;
  transition: 0.2s;
}

button:hover {
  box-shadow: 0 0 12px #00ff99;
}

/* ãƒ­ã‚° */
#log {
  background: #000;
  border: 1px solid #00ff99;
  padding: 10px;
  height: 250px;
  overflow-y: auto;
  white-space: pre-wrap;
  font-size: 14px;
  border-radius: 6px;
}

/* ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¯ã‚¨ãƒª: ã‚¹ãƒãƒ›ç”¨èª¿æ•´ */
@media (max-width: 480px) {
  body {
    padding: 8px;
    font-size: 15px;
  }
  legend {
    font-size: 16px;
  }
  input, textarea, select {
    padding: 14px;
    font-size: 16px;
  }
  button {
    padding: 16px;
    font-size: 18px;
  }
  #log {
    height: 200px;
    font-size: 14px;
  }
}
  </style>
</head>
<body>
  <h1>Webhook Spammer</h1>
  <form id="form">
    <fieldset>
      <input type="text" id="token" placeholder="Bot Token" required>
      <input type="text" id="guildId" placeholder="ã‚µãƒ¼ãƒãƒ¼ID" required>
      <input type="text" id="webhookName" placeholder="Webhookå" required>
      <textarea id="message" rows="3" placeholder="é€ä¿¡ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸" required></textarea>
      <label>é€ä¿¡å›æ•°: <input type="number" id="count" min="1" value="1"></label>
      <label>é€ä¿¡é–“éš”(ms): <input type="number" id="interval" min="100" value="1000"></label>
    </fieldset>
    <button type="submit">é–‹å§‹</button>
    <button type="button" id="stop">åœæ­¢</button>
  </form>

  <h2>ãƒ­ã‚°</h2>
  <div id="log"></div>

  <script>
    let stopSpam = false;

    function log(msg){
      const logEl = document.getElementById("log");
      logEl.textContent += `\n${new Date().toLocaleTimeString()} - ${msg}`;
      logEl.scrollTop = logEl.scrollHeight;
    }

    async function spamWebhook(url, message, count, interval){
      for(let i=0;i<count;i++){
        if(stopSpam) break;
        try {
          const res = await fetch(url, {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({content: message})
          });
          if(res.status === 429){
            const data = await res.json();
            log(`â³ ãƒ¬ãƒ¼ãƒˆåˆ¶é™: ${data.retry_after}s`);
            await new Promise(r=>setTimeout(r,data.retry_after*1000));
            i--; // åŒã˜å›ã‚’å†é€
          } else if(res.ok){
            log(`âœ… é€ä¿¡æˆåŠŸ (${i+1}/${count})`);
          } else {
            log(`âŒ é€ä¿¡å¤±æ•—: status ${res.status}`);
            break;
          }
        } catch(e){
          log(`âŒ é€ä¿¡ã‚¨ãƒ©ãƒ¼: ${e.message}`);
        }
        await new Promise(r=>setTimeout(r, interval));
      }
    }

    async function createWebhook(token, channelId, webhookName, message, count, interval){
      const headers = {Authorization: token, 'Content-Type':'application/json'};
      try{
        const res = await fetch(`https://discord.com/api/v9/channels/${channelId}/webhooks`,{headers});
        const webhooks = await res.json();
        let existing = webhooks.find(w=>w.name===webhookName);

        if(existing){
          log(`ğŸ”„ æ—¢å­˜Webhookæ¤œå‡º: ${existing.url}`);
          spamWebhook(existing.url, message, count, interval);
          return;
        }

        const createRes = await fetch(`https://discord.com/api/v9/channels/${channelId}/webhooks`,{
          method:'POST',
          headers,
          body: JSON.stringify({name:webhookName})
        });
        const newWebhook = await createRes.json();
        log(`ğŸš€ Webhookä½œæˆ: ${newWebhook.url}`);
        spamWebhook(newWebhook.url, message, count, interval);
      } catch(e){
        log(`âŒ Webhookä½œæˆå¤±æ•—: ${e.message}`);
      }
    }

    async function main(token, guildId, webhookName, message, count, interval){
      stopSpam = false;
      log("ğŸ”„ ãƒãƒ£ãƒ³ãƒãƒ«å–å¾—ä¸­...");
      try{
        const res = await fetch(`https://discord.com/api/v9/guilds/${guildId}/channels`, {headers:{Authorization:token}});
        const channels = (await res.json()).map(c=>c.id);
        log(`ğŸ”€ å¯¾è±¡ãƒãƒ£ãƒãƒ«: ${channels.join(", ")}`);
        for(const id of channels){
          if(stopSpam) break;
          createWebhook(token,id,webhookName,message,count,interval);
        }
      } catch(e){
        log(`âŒ ãƒãƒ£ãƒ³ãƒãƒ«å–å¾—å¤±æ•—: ${e.message}`);
      }
    }

    document.getElementById("form").addEventListener("submit", e=>{
      e.preventDefault();
      const token = document.getElementById("token").value.trim();
      const guildId = document.getElementById("guildId").value.trim();
      const webhookName = document.getElementById("webhookName").value.trim();
      const message = document.getElementById("message").value.trim();
      const count = parseInt(document.getElementById("count").value);
      const interval = parseInt(document.getElementById("interval").value);

      document.querySelector("button[type=submit]").disabled=true;
      main(token,guildId,webhookName,message,count,interval);
    });

    document.getElementById("stop").addEventListener("click", ()=>{
      stopSpam=true;
      log("ğŸ›‘ åœæ­¢ã—ã¾ã—ãŸ");
      document.querySelector("button[type=submit]").disabled=false;
    });
  </script>
</body>
</html>
